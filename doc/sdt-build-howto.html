<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Building the Scripted Display Tools (sdt/sdt3d)</title><link rel="stylesheet" type="text/css" href="html.css"><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div lang="" class="article"><div class="titlepage"><div><div><h2 class="title"><a name="d0e1"></a><span class="inlinemediaobject"><img src="resources/sdt3dLogo.gif" width="81"></span>Building the Scripted Display Tools (sdt/sdt3d)</h2></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="sect1"><a href="#SDTOutputFormat">1. Building sdt3d</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e27">1.1. Linux Build</a></span></dt><dt><span class="sect2"><a href="#d0e65">1.2. OSX Build</a></span></dt><dt><span class="sect2"><a href="#d0e77">1.3. Windows Build</a></span></dt></dl></dd><dt><span class="sect1"><a href="#d0e148">2. Building sdt and sdtcmd</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e160">2.1. Windows Build</a></span></dt><dt><span class="sect2"><a href="#d0e174">2.2. Linux Build</a></span></dt></dl></dd></dl></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="SDTOutputFormat"></a>1.&nbsp;Building sdt3d</h2></div></div></div><p>The sdt3d application has external dependencies on NASA's Worldwind JDK, joglutils (a library that provides Java bindings for OpenGL and 3d Model support), and protolib-jni (a library that provides java native interface to NRL's protolib protoPipe implementation). By default the osx and unix build scripts will attempt to download (and patch where applicable) these depencies from freely available sources. Alternatively, zip files of the fully patched Worldwind JDK and joglutils distributions known to work with the latest sdt3d code base are posted on the Protean Forge proteantools project release site in the latest sdt file release directory. The protolib-jni svn repository is also hosted on the Protean Forge website in the protolib project. See the instructions specific to your OS for further build instructions.</p><p>The latest open source version of the NASA Worldwind JDK is located at <a class="ulink" href="http://worldwind.arc.nasa.gov/java/index.html" target="_top">http://worldwind.arc.nasa.gov/java/index.html</a>, the protolib source at <a class="ulink" href="http://downloads.pf.itd.nrl.navy.mil/protolib/" target="_top">http://downloads.pf.itd.nrl.navy.mil/protolib/</a>, and the joglutils source at<a class="ulink" href="https://github.com/sgotehl/jogl-utils/" target="_top"> https://github.com/sgothel/jogl-utils</a>. README.joglutils and README.worldwind files are available in the docs directory that detail modifications required to these distributions (Note that these changes are applied automatically by the patch scripts used by the makefiles).</p><p>Note that Java 7 is currently required to build sdt3d. Instructions to build with Java 6 available upon request. Git is required in order to download joglutils. wget is used to download worldwind.</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="d0e27"></a>1.1.&nbsp;Linux Build</h3></div></div></div><p>For Linux, makefile are provided that will build either a 32 bit or 64 bit sdt3d application. (You may also build sdt3d under linux via Eclipse as described in the windows build section.)</p><p>The makefile will download and patch source dependencies from freely available sites listed above if joglutils.zip, worldwind.zip, and protolib.tgz files do not already exist in the makefiles directory. (If you have access to protean forge you may download the prepatched files from from the sdt file release section at https://pf.itd.nrl.navy.mil/sf/frs/do/viewSummary/projects.sdt/frs. Make sure the files are named joglutils.zip, worldwind.zip, and protolib.tgz)</p><p>To download and patch the source dependencies the makefile requires the "git", "ant", "g++", and "wget" packages. Note that the optional helper script "prep-dependencies-linux" is available that will use apt-get to download dependencies on linux systems.</p><p>Note that you must have JAVA_HOME defined and javac and jar available in your path. When using the openJDK package under Ubuntu you may also need to set java home via update-alternatives, e.g.</p><pre class="programlisting"># set JAVA_HOME to be used by update-alternatives

export JAVA_HOME=/usr/lib/jvm/java-7-openjdk-amd64 # replace as appropriate to your java openjdk location

update-alternatives --display java
update-alternatives --display javac
update-alternatives --display jar</pre><p>Later Ubuntu distributions require libvecmath-java</p><pre class="programlisting">apt-get install libvecmath-java</pre><p>To build protolib.tgz the pthread and netfilter-queue packages are required:</p><pre class="programlisting">apt-get install libpcap-dev

apt-get install libnetfilter-queue-dev</pre><p>From the makefiles directory make sdt3d. Note that "make -f Makefile.&lt;os&gt; all" will make sdt, sdtcmd, and sdt3d.</p><pre class="programlisting">cd sdt/makefiles 
make -f Makefile.linux_&lt;archType&gt; sdt3d </pre><p>If something goes wrong with the above build command it may be helpful to clean out the build directory via:</p><pre class="programlisting">make -f Makefile.linux_&lt;archType&gt; distclean</pre><p>All the files required to run the application are bundled into a sdt3d.zip file located in the makefiles directory. The sdt3d.sh helper script in the makefiles directory can be used to launch the application:</p><pre class="programlisting">./sdt3d.sh</pre><p>The sdtcmd utility can be built via:</p><pre class="programlisting">cd sdt/makefiles

make -f Makefile.linux_&lt;archType&gt; sdtcmd</pre></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="d0e65"></a>1.2.&nbsp;OSX Build</h3></div></div></div><p>A makefile is provided that will build a sdt3d application bundle. (You may also build sdt3d under osx via Eclipse as described in the windows build section.)</p><p>Note that you must have JAVA_HOME defined and javac and jar available in your path. You may either let the makefile script download and patch the dependent source trees from freely available sites or you may download the latest worldwind and joglutils zip files available in the latest sdt file release directory. "git", "ant", and "wget" will be required if you choose to download and patch the files. From the makefiles directory make sdt3d. A mac appplication bundle will be created in the makefiles directory. Note that "make -f Makefile.&lt;os&gt; all" will make sdt, sdtcmd, and sdt3d. A sdt3d.zip file will also be created that contains the sdt3d.app and a sdt3d "linux like" directory structure (e.g. the sdt3d.sh script in in the sdt3d directory can be used to launch sdt3d).</p><p>On later osx distributions it may be necessary to install vecmath.jar available at http://jogamp.org/deployment/java3d/1.6.0-pre11. Copy vecmath.jar to /System/Library/Java/Extensions and set read access to the file.</p><pre class="programlisting">cd sdt/makefiles
make -f Makefile.macosx sdt3d.app</pre></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="d0e77"></a>1.3.&nbsp;Windows Build</h3></div></div></div><p>The easiest way to build sdt3d under windows is to use the Eclipse tool with the following four projects:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>sdt3d</p><p>Within Eclipse, check the sdt3d java src files out of the sdt SVN repository. (You will need developer access to the sdt project hosted on the protean forge website)</p><pre class="programlisting">SVN root = "/svnroot/sdt/trunk"</pre><p>Check out the /src/java folder into a new project and name it sdt3d. Documentation and examples are available in the /sdt/doc and /sdt/examples folders that you may load into a separate project in your workspace.</p><p>If you do not have developer access you may download the sdt nightly build distribution from <a class="ulink" href="http://downloads.pf.itd.nrl.navy.mil/proteantools/" target="_top">http://downloads.pf.itd.nrl.navy.mil/sdt/</a> and load the sdt3d source files directly from sdt/src/java.</p><p>The java folder contains <a class="ulink" href="http://www.eclipse.org/" target="_top">Eclipse</a> .project and .classpath configuration files that should be used to build the sdt3d project. (They expect the worldwind, joglutils, and protolib-jni project directories to be relative to the sdt3d as described in the following steps).</p><p>Modify the sdt3d java build path to find the java jre library in the appropriate location for your system if necessary. (See the sdt3d project properties java build path libraries section)</p></li><li class="listitem"><p>protolib-jni</p><p>If you have developer access check the protolib-jni file out of SVN directly into Eclipse:</p><pre class="programlisting">SVN root = "/svnroot/protolib"</pre><p>Check out the /trunk/src/java folder and name it protolib-jni.</p><p>If you do not have developer access, get the nightly build distribution from <a class="ulink" href="http://downloads.pf.itd.nrl.navy.mil/protolib/" target="_top">http://downloads.pf.itd.nrl.navy.mil/protolib/</a> and load the source files directly from /protolib/src/java.</p><p>Protolib-jni dll, jar, and library files are provided the src/java directory for your convenience and are also available in the protolib binary distribution. They should be loaded into your protolib project.</p><p>If you have need to build protolib-jni, use a Visual Studio CMD (so that you have the correct environment variables set) and change directory to the top level protolib directory. Clean the distribution and configure waf to build the protolib-jni. Finally run waf to create the protolib-jni dll, jar, and library files in the build/default directory.</p><pre class="programlisting">waf distclean
waf configure --build-java 
waf</pre><p>You may need to set the msvc_targets as appropriate for your platform, e.g. x64, x86,amd:</p><pre class="programlisting">waf configure --build-java --msvc_targets=x86,amd</pre></li><li class="listitem"><p>joglutils</p><p>Download the joglutils zip file from the latest sdt3d file release on the protean forge website. Unzip the project relative to the sdt3d project in your Eclipse workspace directory. Load into the Eclipse workspace using the build.xml file provided in the joglutils make directory. This project should be relative to the sdt3d project and be called joglutils.</p><p>You may need to modify the joglutils java build path to find the java jre (rt.jar) library or the java jdk in the appropriate location for your system. (See the joglutils project properties java build path libraries section).</p><p>If you do not have developer access to the protean forge website, you may use the prep-joglutils script within a cygwin environment to download and patch the joglutils freely available source code.</p></li><li class="listitem"><p>worldwind</p><p>Download the worldwind zip file in the latest sdt file release on the protean forge website. Unzip the project relative to the sdt3d project in your Eclipse workspace directory. Load into the Eclipse workspace using the build.xml ant file provided in the worldwind directory.</p><p>Add the jogl.jar file in the worldwind workspace to the joglutils project. (See the joglutils project properties java build path libraries section).</p><p>If you do not have developer access to the protean forge website, you may use the prep-wwj script within a cygwin environment to download and patch the freely available worldwind source code.</p></li></ol></div></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e148"></a>2.&nbsp;Building sdt and sdtcmd</h2></div></div></div><p>To build the sdt application, you will need the wxWidgets library for your platform freely-available from:</p><p><a class="ulink" href="http://www.wxwidgets.org/" target="_top">http://www.wxwidgets.org</a></p><p>The current release depends on wxWidgets 2.9 or wxWidgets 2.8. Previous releases (1.1a1 and above) use wxWidgets 2.6.x. sdt releases 1.0a1-1.0a8 use wxWidgets 2.4.x.</p><p>Please note that binary releases of wxWidgets do not include the header files necessary to compile sdt, so you must download and build the source code. Please see the wxWidgets readme for instructions. It is recommended to compile wxWidgets using the "--disable-shared" config option so that the binary may be moved to machines that do not have wxWidgets installed.</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="d0e160"></a>2.1.&nbsp;Windows Build</h3></div></div></div><p>Sdt src code is available on NRL's protean forge web site at:</p><pre class="programlisting">SVN root = "/svnroot/sdt/trunk"</pre><p>If you do not have developer access you may download the binary distribution from <a class="ulink" href="http://downloads.pf.itd.nrl.navy.mil/sdt/" target="_top">http://downloads.pf.itd.nrl.navy.mil/sdt/</a></p><p>Microsoft Visual Studio project files are available in the distribution in the makefiles/win32 or makefiles/win64 directories. Load the sdt solution file into Microsoft Visual Studio. Project files are available that build sdt and sdtcmd.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="d0e174"></a>2.2.&nbsp;Linux Build</h3></div></div></div><p>Sdt src code is available on NRL's protean forge web site at:</p><pre class="programlisting">SVN root = "/svnroot/proteantools/trunk/sdt"</pre><p>If you do not have developer access you may download the binary distribution from <a class="ulink" href="http://downloads.pf.itd.nrl.navy.mil/sdt/" target="_top">http://downloads.pf.itd.nrl.navy.mil/sdt/</a></p><p>From the makefiles directory make sdt and sdtcmd. "make -f Makefile all" will make sdt,sdtcmd, and sdt3d.</p><pre class="programlisting">cd sdt/makefiles 
make -f Makefile sdt
make -f Makefile sdtcmd</pre><p></p></div></div></div></body></html>